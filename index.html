<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KTÜN Not Hesaplayıcısı</title>
    <style>
        :root { --ktun-mavi: #003366; --ktun-gri: #f8f9fa; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; justify-content: center; padding-top: 30px; background-color: #eef2f3; }
        .container { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 380px; text-align: center; border-top: 6px solid var(--ktun-mavi); }
        
        h2 { color: var(--ktun-mavi); margin-bottom: 25px; font-size: 20px; font-weight: bold; text-transform: uppercase; }
        label { font-size: 14px; color: #666; font-weight: bold; display: block; text-align: left; }
        input { width: 100%; padding: 12px; margin: 8px 0 15px 0; box-sizing: border-box; border: 2px solid #eee; border-radius: 8px; font-size: 16px; transition: 0.3s; }
        input:focus { border-color: var(--ktun-mavi); outline: none; }
        
        /* Oklar görünür durumda */
        input[type="number"] { -webkit-appearance: number-input; -moz-appearance: number-input; appearance: number-input; }

        button { width: 100%; padding: 14px; background-color: var(--ktun-mavi); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: bold; transition: 0.3s; }
        button:hover { background-color: #002244; }
        
        #sonuc { margin-top: 20px; padding: 15px; border-radius: 8px; text-align: center; font-size: 18px; display: none; }
        .gecer { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .kalir { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        
        .hedef-liste { margin-top: 25px; border-top: 2px solid #eee; padding-top: 15px; }
        .hedef-liste h3 { font-size: 15px; color: #444; margin-bottom: 10px; }
        table { width: 100%; border-collapse: collapse; font-size: 14px; }
        th, td { border: 1px solid #eee; padding: 10px; text-align: center; }
        th { background-color: var(--ktun-gri); color: var(--ktun-mavi); }
    </style>
</head>
<body>

<div class="container">
    <h2>KTÜN Not Sistemi</h2>

    <label>Vize Notu (%40):</label>
    <input type="number" id="vize" min="0" max="100" placeholder="Vize notunuz..." oninput="hedefleriGoster()">
    
    <label>Final Notu (%60):</label>
    <input type="number" id="final" min="0" max="100" placeholder="Final notunuz...">
    
    <button onclick="hesapla()">HESAPLA</button>

    <div id="sonuc"></div>

    <div class="hedef-liste" id="hedefListe" style="display:none;">
        <h3>Finalden Kaç Almalısın?</h3>
        <table>
            <thead>
                <tr>
                    <th>Hedef Harf</th>
                    <th>Min. Final</th>
                </tr>
            </thead>
            <tbody id="hedefGövde"></tbody>
        </table>
    </div>
</div>

<script>
    // Fare tekerleği (Scroll) ile sayı değiştirme
    document.querySelectorAll('input[type="number"]').forEach(input => {
        input.addEventListener('wheel', function(e) {
            e.preventDefault();
            let val = parseFloat(this.value) || 0;
            if (e.deltaY < 0) { if (val < 100) this.value = val + 1; }
            else { if (val > 0) this.value = val - 1; }
            if (this.id === 'vize') hedefleriGoster();
        }, { passive: false });
    });

    // Tablodaki DC ve üzeri (Geçer) notlar
    const gecerEsikler = [
        { harf: "AA", min: 82 }, { harf: "BA", min: 74 },
        { harf: "BB", min: 65 }, { harf: "CB", min: 58 },
        { harf: "CC", min: 50 }, { harf: "DC", min: 40 }
    ];

    function hedefleriGoster() {
        const vize = parseFloat(document.getElementById('vize').value);
        const hedefListe = document.getElementById('hedefListe');
        const hedefGövde = document.getElementById('hedefGövde');
        
        if (isNaN(vize) || vize < 0) {
            hedefListe.style.display = "none";
            return;
        }

        hedefListe.style.display = "block";
        hedefGövde.innerHTML = "";

        gecerEsikler.forEach(esik => {
            let gerekenFinal = (esik.min - (vize * 0.4)) / 0.6;
            // 35 Barajı: Gereken not 35'ten küçükse 35 gösterir
            let gosterilecekFinal = Math.max(35, gerekenFinal).toFixed(1);
            let finalYazi = `<strong>${gosterilecekFinal}</strong>`;
            
            if (gerekenFinal > 100) finalYazi = "<i style='color:#ccc'>İmkansız</i>";

            hedefGövde.innerHTML += `<tr><td>${esik.harf} (${esik.min})</td><td>${finalYazi}</td></tr>`;
        });
    }

    function hesapla() {
        const vize = parseFloat(document.getElementById('vize').value);
        const final = parseFloat(document.getElementById('final').value);
        const sonucDiv = document.getElementById('sonuc');

        if(isNaN(vize) || isNaN(final)) {
            sonucDiv.style.display = "block";
            sonucDiv.className = "kalir";
            sonucDiv.innerText = "Lütfen notları girin.";
            return;
        }

        const ortalama = (vize * 0.4) + (final * 0.6);
        let harf = "FF";
        let durum = "KALIR";

        // Final 35 barajı ve puan aralıkları
        if (final >= 35) {
            if (ortalama >= 82) { harf = "AA"; durum = "GEÇER"; }
            else if (ortalama >= 74) { harf = "BA"; durum = "GEÇER"; }
            else if (ortalama >= 65) { harf = "BB"; durum = "GEÇER"; }
            else if (ortalama >= 58) { harf = "CB"; durum = "GEÇER"; }
            else if (ortalama >= 50) { harf = "CC"; durum = "GEÇER"; }
            else if (ortalama >= 40) { harf = "DC"; durum = "GEÇER"; }
            else if (ortalama >= 35) { harf = "DD"; }
            else if (ortalama >= 25) { harf = "FD"; }
        }

        sonucDiv.style.display = "block";
        sonucDiv.className = (durum === "GEÇER") ? "gecer" : "kalir";
        sonucDiv.innerHTML = `Ortalama: <strong>${ortalama.toFixed(2)}</strong><br>Harf: <strong>${harf}</strong><br>Durum: ${durum}`;
    }
</script>

</body>
</html>