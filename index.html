<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Not Hesaplayıcısı</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; justify-content: center; padding-top: 30px; background-color: #eef2f3; }
        .container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 400px; }
        h2 { text-align: center; color: #333; margin-bottom: 25px; }
        label { font-size: 14px; color: #666; font-weight: bold; }
        input { width: 100%; padding: 12px; margin: 8px 0 15px 0; box-sizing: border-box; border: 1px solid #ddd; border-radius: 6px; font-size: 16px; }
        
        /* Okları geri getirdik */
        input[type="number"] { -webkit-appearance: number-input; -moz-appearance: number-input; appearance: number-input; }

        button { width: 100%; padding: 12px; background-color: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; font-weight: bold; margin-bottom: 10px; }
        button:hover { background-color: #0056b3; }
        #sonuc { margin-top: 20px; padding: 15px; border-radius: 6px; text-align: center; font-size: 18px; display: none; }
        .gecer { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .kalir { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        
        .hedef-liste { margin-top: 25px; border-top: 2px solid #eee; padding-top: 15px; }
        .hedef-liste h3 { font-size: 16px; color: #444; text-align: center; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 14px; }
        th, td { border: 1px solid #eee; padding: 8px; text-align: center; }
        th { background-color: #f8f9fa; }
    </style>
</head>
<body>

<div class="container">
    <h2>KTÜ Not Sistemi</h2>

    <label>Vize Notu (%40):</label>
    <input type="number" id="vize" min="0" max="100" placeholder="Vizenizi girin..." oninput="hedefleriGoster()">
    
    <label>Final Notu (%60):</label>
    <input type="number" id="final" min="0" max="100" placeholder="Finalinizi girin...">
    
    <button onclick="hesapla()">Ortalamayı Gör</button>

    <div id="sonuc"></div>

    <div class="hedef-liste" id="hedefListe" style="display:none;">
        <h3>Finalden Kaç Almalısın?</h3>
        <table>
            <thead>
                <tr>
                    <th>Hedef Harf</th>
                    <th>Gereken Final</th>
                </tr>
            </thead>
            <tbody id="hedefGövde"></tbody>
        </table>
    </div>
</div>

<script>
    // Scroll (Fare Tekerleği) ile Sayı Değiştirme
    document.querySelectorAll('input[type="number"]').forEach(input => {
        input.addEventListener('wheel', function(e) {
            e.preventDefault();
            let step = 1;
            let val = parseFloat(this.value) || 0;
            if (e.deltaY < 0) {
                if (val < 100) this.value = val + step;
            } else {
                if (val > 0) this.value = val - step;
            }
            // Değer değişince tablodaki hedefleri güncelle
            if (this.id === 'vize') hedefleriGoster();
        }, { passive: false });
    });

    const esikler = [
        { harf: "AA", min: 82 }, { harf: "BA", min: 74 },
        { harf: "BB", min: 65 }, { harf: "CB", min: 58 },
        { harf: "CC", min: 50 }, { harf: "DC", min: 40 }
    ];

    function hedefleriGoster() {
        const vize = parseFloat(document.getElementById('vize').value);
        const hedefListe = document.getElementById('hedefListe');
        const hedefGövde = document.getElementById('hedefGövde');
        
        if (isNaN(vize) || vize < 0) {
            hedefListe.style.display = "none";
            return;
        }

        hedefListe.style.display = "block";
        hedefGövde.innerHTML = "";

        esikler.forEach(esik => {
            let gerekenFinal = (esik.min - (vize * 0.4)) / 0.6;
            let finalYazi = `<strong>${Math.max(35, gerekenFinal).toFixed(1)}</strong>`;
            
            if (gerekenFinal > 100) finalYazi = "<i style='color:#bdc3c7'>İmkansız</i>";

            hedefGövde.innerHTML += `<tr><td>${esik.harf} (${esik.min})</td><td>${finalYazi}</td></tr>`;
        });
    }

    function hesapla() {
        const vize = parseFloat(document.getElementById('vize').value);
        const final = parseFloat(document.getElementById('final').value);
        const sonucDiv = document.getElementById('sonuc');

        if(isNaN(vize) || isNaN(final)) {
            sonucDiv.style.display = "block";
            sonucDiv.className = "kalir";
            sonucDiv.innerText = "Lütfen notları girin.";
            return;
        }

        const ortalama = (vize * 0.4) + (final * 0.6);
        let harf = "FF";
        let durum = "KALIR";

        if (final >= 35) {
            if (ortalama >= 82) { harf = "AA"; durum = "GEÇER"; }
            else if (ortalama >= 74) { harf = "BA"; durum = "GEÇER"; }
            else if (ortalama >= 65) { harf = "BB"; durum = "GEÇER"; }
            else if (ortalama >= 58) { harf = "CB"; durum = "GEÇER"; }
            else if (ortalama >= 50) { harf = "CC"; durum = "GEÇER"; }
            else if (ortalama >= 40) { harf = "DC"; durum = "GEÇER"; }
        }

        sonucDiv.style.display = "block";
        sonucDiv.className = (durum === "GEÇER") ? "gecer" : "kalir";
        sonucDiv.innerHTML = `Ortalama: <strong>${ortalama.toFixed(2)}</strong><br>Harf: <strong>${harf}</strong><br>Durum: ${durum}`;
    }
</script>

</body>
</html>